---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { Image } from 'astro:assets';
import heroImage from '@/images/hero_image_mark_02.jpg';
import { useTranslations, getPathPrefix, getLangFromUrl  } from '@/i18n/utils';

// Prerender this page as static HTML for better performance
export const prerender = true;

export function getStaticPaths() {
  return [
    { params: { lang: undefined}}, // Default language
    { params: { lang: 'en' } },
    { params: { lang: 'ru' } },
  ];
}

const lang = getLangFromUrl(Astro.url) || 'he';
const langPrefix = getPathPrefix(lang);
const t = useTranslations(lang);
---

<BaseLayout
  title={t('header.name')}
  description={t('header.subtitle')}
  lang={lang}
>
  <div class="page active">
    <div class="hero">
      <Image
        src={heroImage}
        alt="Prof. Mark Eidelman - Pediatric Orthopedic Specialist"
        class="hero-background"
        loading="eager"
        fetchpriority="high"
        quality={90}
        widths={[640, 768, 1024, 1280, 1536, 1920]}
        sizes="100vw"
      />
      <div class="hero-wrapper">
        <div class="hero-content">
          <h1>{t('home.hero.title')}</h1>
          <!-- <h3>
            {t('home.hero.subtitle')}
          </h3> -->
          <p>
            {t('home.hero.description_line1')} {t('home.hero.description_line2')}{' '}
            
            <!-- {t('home.hero.description_line3')} {t('home.hero.description_line4')}{' '}
            <span class="highlighted-text">
              {t('home.hero.description_highlighted')}
            </span>{' '}
            {t('home.hero.description_closing')} -->
          </p>

          <div class="hero-stats">
            <div class="stat-card">
              <div class="number">{t('home.hero.stats.experience.number')}</div>
              <div class="label">{t('home.hero.stats.experience.label')}</div>
            </div>
            <div class="stat-card">
              <div class="number">{t('home.hero.stats.surgeries.number')}</div>
              <div class="label">{t('home.hero.stats.surgeries.label')}</div>
            </div>
            <div class="stat-card">
              <div class="number">{t('home.hero.stats.trained.number')}</div>
              <div class="label">{t('home.hero.stats.trained.label')}</div>
            </div>
          </div>
          <div class="cta-buttons">
            <a href={`${langPrefix}/clinics`} class="btn btn-primary">
              {t('home.hero.cta.clinics')}
            </a>
            <a href={`${langPrefix}/guides`} class="btn btn-secondary">
              {t('home.hero.cta.guides')}
            </a>
            <a href={`${langPrefix}/innovation`} class="btn btn-tertiary home-hero-btn-tertiary-mobile">
              {t('home.hero.cta.innovation')}
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="credentials">
      <h2 class="section-title">{t('home.credentials.title')}</h2>
      <div class="two-column">
        <div class="column">
          <h4>{t('home.credentials.education.title')}</h4>
          <ul>
            <li>{t('home.credentials.education.md')}</li>
            <li>{t('home.credentials.education.residency')}</li>
            <li>{t('home.credentials.education.fellowship')}</li>
            <li>{t('home.credentials.education.certification')}</li>
          </ul>
        </div>
        <div class="column">
          <h4>{t('home.credentials.specializations.title')}</h4>
          <ul>
            <li>{t('home.credentials.specializations.pediatric')}</li>
            <li>{t('home.credentials.specializations.limb_lengthening')}</li>
            <li>{t('home.credentials.specializations.deformity')}</li>
            <li>{t('home.credentials.specializations.techniques')}</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- <div class="testimonials-wrapper">
      <h2 class="section-title">{t('home.testimonials.title')}</h2>
      <div class="testimonials">
        <div class="testimonial">
          <div class="testimonial-author">{t('home.testimonials.testimonial_1.author')}</div>
          <div class="stars">{t('home.testimonials.testimonial_1.rating')}</div>
          <div class="testimonial-text">
            {t('home.testimonials.testimonial_1.text')}
          </div>
        </div>
        <div class="testimonial">
          <div class="testimonial-author">{t('home.testimonials.testimonial_2.author')}</div>
          <div class="stars">{t('home.testimonials.testimonial_2.rating')}</div>
          <div class="testimonial-text">
            {t('home.testimonials.testimonial_2.text')}
          </div>
        </div>
        <div class="testimonial">
          <div class="testimonial-author">{t('home.testimonials.testimonial_3.author')}</div>
          <div class="stars">{t('home.testimonials.testimonial_3.rating')}</div>
          <div class="testimonial-text">
            {t('home.testimonials.testimonial_3.text')}
          </div>
        </div>
      </div>
    </div> -->
  </div>
</BaseLayout>

<style>
  .hero {
    padding-block: 40px;
    padding-inline-start: 100px;
    padding-inline-end: 0;
    width: 100vw;
    position: relative;
    inset-inline-start: 50%;
    inset-inline-end: 50%;
    margin-inline-start: -50vw;
    margin-inline-end: -50vw;
    margin-block: 0;
    overflow: hidden;
  }

  .hero-background {
    position: absolute;
    top: 0;
    inset-inline-start: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 0;
  }

  .hero::before {
    content: '';
    position: absolute;
    inset-block-start: 0;
    inset-inline-start: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to var(--gradient-direction, right),
      rgba(0, 0, 0, 0.9) 0%,
      rgba(0, 0, 0, 0.6) 30%,
      rgba(0, 0, 0, 0.4) 50%,
      rgba(0, 0, 0, 0.2) 70%,
      transparent 100%);
    z-index: 1;
    pointer-events: none;
  }

  [dir='rtl'] .hero::before {
    --gradient-direction: left;
  }

  .hero-wrapper {
    max-width: 1400px;
    margin: 0 auto;
    padding-inline: 20px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 48px;
    align-items: center;
    position: relative;
    z-index: 2;
  }

  .hero-content h1 {
    font-size: 2.4rem;
    color: white;
    margin-bottom: 2rem;
    line-height: 1.1;
    font-family: 'Montserrat', sans-serif;
    font-weight: 700;
    letter-spacing: -0.8px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
  }

  .hero-content h3 {
    font-size: 1.4rem;
    color: white;
    margin-bottom: 1rem;
    line-height: 1.1;
    font-family: 'Montserrat', sans-serif;
    font-weight: 700;
    letter-spacing: -0.8px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
  }

  .hero-content p {
    font-size: 1rem;
    color: rgba(255, 255, 255, 0.95);
    margin-bottom: 20px;
    line-height: 1.6;
    width: 65ch;
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
  }

  .highlighted-text {
    text-decoration: underline;
    font-size: 1.05rem;
  }

  .hero-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--card-gap);
    margin: 2rem 0;
  }

  .stat-card {
    background: var(--op-white);
    padding: 20px;
    border-radius: 2px;
    text-align: center;
    border-inline-start:3px solid var(--warning);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  }

  .stat-card .number {
    font-size: 1.8rem;
    font-weight: 700;
    font-family: 'Montserrat', sans-serif;
    color: var(--accent);
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    margin-bottom: 6px;
  }

  .stat-card .label {
    font-size: 0.65rem;
    color: var(--text-light);
    text-transform: uppercase;
    font-weight: 600;
    letter-spacing: 0.8px;
    font-family: 'Inter', sans-serif;
  }

  [dir='rtl'] .stat-card .label {
    color: red;
    font-size: 1.3rem;
    font-weight: 700;
    font-family: Georgia, 'Times New Roman', Times, serif ;
  }

  .cta-buttons {
    display: flex;
    gap: 12px;
    margin: 32px 0;
    flex-wrap: wrap;
  }

  .credentials {
    padding-block: 24px 16px;
    padding-inline-end: 32px;
    margin-inline-start: 50px;
  }

  .mentorship {
    margin-inline-start: 50px;
  }

  .testimonials-wrapper {
    padding-block: 24px 16px;
    padding-inline-end: 32px;
    margin-bottom: 32px;
    margin-inline-start: 50px;
  }

  .testimonials {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--card-gap);
    margin-bottom: 32px;
  }

  .testimonial {
    background: white;
    padding: 26px;
    border-start-end-radius: 20px;
    border-end-end-radius: 20px;
    border-inline-start: 3px solid var(--accent);
    box-shadow: 2px 4px 8px rgba(0, 0, 0, 0.15);
  }

  .stars {
    color: var(--accent);
    font-size: 0.85rem;
    margin-bottom: 12px;
  }

  .testimonial-text {
    font-size: 0.8125rem;
    color: var(--text-light);
    margin-bottom: 16px;
    font-style: italic;
    line-height: 1.6;
  }

  .testimonial-author {
    font-size: 0.7rem;
    color: var(--primary);
    font-weight: 700;
    font-family: 'Montserrat', sans-serif;
  }


  @media (max-width: 768px) {
    .hero {
      padding: 30px 20px;
      min-height: 82vh;
      height: auto;
    }

    .hero::before {
      background: linear-gradient(to bottom,
        rgba(0, 0, 0, 0.45) 0%,
        rgba(0, 0, 0, 0.35) 50%,
        rgba(0, 0, 0, 0.25) 100%);
    }

    .hero-wrapper {
      grid-template-columns: 1fr;
      padding: 1rem;
    }

    .hero-content {
      display: flex;
      flex-direction: column;
    }

    .hero-content h1 {
      font-size: 1.75rem;
      margin: 0 0 1rem;
      letter-spacing: -0.5px;
    }

    .hero-content h3 {
      font-size: 1.1rem;
      margin-bottom: 1.25rem;
    }

    .hero-content p {
      font-size: 0.95rem;
      width: 100%;
      margin-bottom: 24px;
      line-height: 1.7;
    }

    .highlighted-text {
      font-size: 1rem;
    }

    .cta-buttons {
      flex-direction: column;
      gap: 10px;
      margin: 0 0 28px 0;
      order: 2;
    }

    .hero-stats {
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin: 0 0 20px 0;
      order: 3;
    }

    .stat-card {
      padding: 16px 12px;
    }

    .stat-card .number {
      font-size: 1.5rem;
      margin-bottom: 4px;
    }

    .stat-card .label {
      font-size: 0.6rem;
      letter-spacing: 0.5px;
    }

    .btn {
      width: 100%;
      text-align: center;
      padding: 14px 24px;
      font-size: 0.95rem;
    }

    .credentials,
    .mentorship,
    .testimonials-wrapper {
      margin-inline-start: 20px;
      padding-block: 24px 16px;
      padding-inline: 0 20px;
    }

    .testimonials {
      grid-template-columns: 1fr;
    }

    .home-hero-btn-tertiary-mobile {
      background: var(--accentB);
      color: var(--primary);
      border: 2px solid var(--accent);
    }
  }
</style>
