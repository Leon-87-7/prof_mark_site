---
import BaseLayout from '@/layouts/BaseLayout.astro';
import ComingSoonBtn from '@/components/ComingSoonBtn.astro';
import { useTranslations, getLangFromUrl } from '@/i18n/utils';

export function getStaticPaths() {
  return [
    { params: { lang: undefined}}, // Default language
    { params: { lang: 'en' } },
    { params: { lang: 'ru' } },
  ];
}

const lang = getLangFromUrl(Astro.url) || 'he';
const t = useTranslations(lang);
---

<BaseLayout
  title={t('guides.title')}
  description={t('guides.subtitle')}
  lang={lang}
>
  <div class="page active">
    <div class="section">
      <h2 class="section-title">{t('guides.title')}</h2>
      <p class="section-subtitle">
        {t('guides.subtitle')}
      </p>
    </div>

    <div class="guides-buttons">
      <ComingSoonBtn message={t('footer.comingSoon')} variant="primary">
        {t('guides.quick_access.pre_surgery')}
      </ComingSoonBtn>
      <ComingSoonBtn message={t('footer.comingSoon')} variant="secondary">
        {t('guides.quick_access.post_surgery')}
      </ComingSoonBtn>
      <ComingSoonBtn message={t('footer.comingSoon')} variant="pt-ex">
        {t('guides.quick_access.pt_exercises')}
      </ComingSoonBtn>
      <ComingSoonBtn message={t('footer.comingSoon')} variant="primary">
        {t('guides.quick_access.recovery_timeline')}
      </ComingSoonBtn>
    </div>

    <div class="section">
      <h2 class="section-title section-title-small">
        {t('guides.pre_surgery.section_title')}
      </h2>
      <div class="cards-grid">
        <div class="card">
          <div class="card-header">{t('guides.pre_surgery.checklist.emoji')}</div>
          <div class="card-content">
            <h3>{t('guides.pre_surgery.checklist.title')}</h3>
            <p>
              {t('guides.pre_surgery.checklist.description')}
            </p>
            <ComingSoonBtn message={t('footer.comingSoon')} variant="primary">
              {t('guides.pre_surgery.checklist.cta')}
            </ComingSoonBtn>
          </div>
        </div>
        <div class="card">
          <div class="card-header">{t('guides.pre_surgery.exercises.emoji')}</div>
          <div class="card-content">
            <h3>{t('guides.pre_surgery.exercises.title')}</h3>
            <p>
              {t('guides.pre_surgery.exercises.description')}
            </p>
            <ComingSoonBtn message={t('footer.comingSoon')} variant="primary">
              {t('guides.pre_surgery.exercises.cta')}
            </ComingSoonBtn>
          </div>
        </div>
        <div class="card">
          <div class="card-header">{t('guides.pre_surgery.questions.emoji')}</div>
          <div class="card-content">
            <h3>{t('guides.pre_surgery.questions.title')}</h3>
            <p>
              {t('guides.pre_surgery.questions.description')}
            </p>
            <ComingSoonBtn message={t('footer.comingSoon')} variant="primary">
              {t('guides.pre_surgery.questions.cta')}
            </ComingSoonBtn>
          </div>
        </div>
      </div>
    </div>

    <div class="section">
      <h2 class="section-title section-title-small">
        {t('guides.post_surgery.section_title')}
      </h2>
      <div class="cards-grid">
        <div class="card">
          <div class="card-header">{t('guides.post_surgery.first_week.emoji')}</div>
          <div class="card-content">
            <h3>{t('guides.post_surgery.first_week.title')}</h3>
            <p>
              {t('guides.post_surgery.first_week.description')}
            </p>
            <ComingSoonBtn message={t('footer.comingSoon')} variant="primary">
              {t('guides.post_surgery.first_week.cta')}
            </ComingSoonBtn>
          </div>
        </div>
        <div class="card">
          <div class="card-header">{t('guides.post_surgery.lengthening.emoji')}</div>
          <div class="card-content">
            <h3>{t('guides.post_surgery.lengthening.title')}</h3>
            <p>
              {t('guides.post_surgery.lengthening.description')}
            </p>
            <ComingSoonBtn message={t('footer.comingSoon')} variant="primary">
              {t('guides.post_surgery.lengthening.cta')}
            </ComingSoonBtn>
          </div>
        </div>
        <div class="card">
          <div class="card-header">{t('guides.post_surgery.pt.emoji')}</div>
          <div class="card-content">
            <h3>{t('guides.post_surgery.pt.title')}</h3>
            <p>
              {t('guides.post_surgery.pt.description')}
            </p>
            <ComingSoonBtn message={t('footer.comingSoon')} variant="primary">
              {t('guides.post_surgery.pt.cta')}
            </ComingSoonBtn>
          </div>
        </div>
      </div>
    </div>

    <div class="feature-box">
      <h3>{t('guides.bundle.title')}</h3>
      <p>
        {t('guides.bundle.description')}
      </p>
      <ComingSoonBtn message={t('footer.comingSoon')} variant="primary" cta>
        {t('guides.bundle.cta')}
      </ComingSoonBtn>
    </div>

    <div class="section colored-top-border">
      <h2 class="section-title section-title-small">
        {t('guides.faq.section_title')}
      </h2>
      <div class="cards-grid">
        <div class="card">
          <div class="card-content">
            <h3>{t('guides.faq.recovery_time.question')}</h3>
            <p>
              {t('guides.faq.recovery_time.answer')}
            </p>
          </div>
        </div>
        <div class="card">
          <div class="card-content">
            <h3>{t('guides.faq.risks.question')}</h3>
            <p>
              {t('guides.faq.risks.answer')}
            </p>
          </div>
        </div>
        <div class="card">
          <div class="card-content">
            <h3>{t('guides.faq.fly.question')}</h3>
            <p>
              {t('guides.faq.fly.answer')}
            </p>
          </div>
        </div>
        <div class="card">
          <div class="card-content">
            <h3>{t('guides.faq.max_gain.question')}</h3>
            <p>
              {t('guides.faq.max_gain.answer')}
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</BaseLayout>

<style>
.guides-buttons {
  justify-content: center;
  align-items: center;
  display: flex;
  gap: 10px;
  margin: 30px 0;
  flex-wrap: wrap;
}

.section-title-small {
  font-size: 1.25rem;
  margin-top: 0;
}

/* GuidesPage specific overrides */
.cards-grid .card {
  display: flex;
  flex-direction: column;
}

.cards-grid .card .card-content {
  display: flex;
  flex-direction: column;
  flex: 1;
  padding-bottom: 1.5rem;
}

.cards-grid .card .card-content > p {
  margin-bottom: 1rem;
  flex: 1;
}
</style>

<!-- Global styles needed for React island buttons -->
<style is:global>
.cards-grid .card .btn {
  width: 100%;
  margin-top: auto;
  padding: 8px;
}

.btn.btn-pt-ex {
  padding: 9.5px 26px;
  background: transparent;
  color: var(--primary);
  border: 2px solid var(--primary);
}

.btn.btn-pt-ex:hover {
  background: var(--primary);
  color: white;
  transform: translateY(-1px);
}

@media (max-width: 768px) {
  .guides-buttons button {
    width: 80%;
  }
  .btn.btn-pt-ex,
  .btn.btn-cta {
    background: var(--accentB);
    color: var(--primary);
    border: 2px solid var(--accent);
  }
}
</style>
